<!--
  ============================================================
  Clarity Metabolics - Physical Anchor: A Grounding Compass for the Body
  Interactive Web Tool for Post-Awakening Physical Wellness
  ============================================================
  
  Version: 3.0.0 (Final)
  Created: August 2025
  Author: Clarity Metabolics
  
  Description:
  9-step interactive tool to help users develop body awareness,
  recognize physical patterns, and learn nervous system regulation.
  Part of the Five Anchors framework for post-awakening support.
  
  Features:
  - Progressive 9-step flow
  - Light/dark theme toggle
  - Download summary functionality
  - Sacred reflection modal
  - Mobile responsive design
  - Progress tracking
  - Body awareness check-in with structured panels
  - Pattern recognition for physical signals
  - Regulation techniques and practices
  
  Usage:
  Standalone HTML file - no dependencies required
  Open in any modern web browser
  
  License: © 2025 Clarity Metabolics
  Website: https://claritymetabolics.com
  ============================================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Physical Anchor — A Grounding Compass for the Body</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --main-color:#7C8B60;
    --accent-color:#E5EBDD;
    --contrast-color:#3D472C;
    --text-color:#333;
    --bg-color:#fff;
    --border-color:#ddd;
    --shadow:0 2px 10px rgba(0,0,0,.1);
    --success-color:#5a7c41;
    --warning-color:#dc3545;
    --green-panel:#E5EBDD;
    --yellow-panel:#FFF8CC;
    --red-panel:#F5E6E6;
  }
  [data-theme="dark"]{
    --text-color:#e6e6e6;
    --bg-color:#1a1a1a;
    --border-color:#444;
    --accent-color:#2a3225;
    --shadow:0 2px 12px rgba(0,0,0,.35);
    --green-panel:#2d352a;
    --yellow-panel:#3a3620;
    --red-panel:#3a2828;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:'Open Sans',sans-serif;
    color:var(--text-color);
    background:var(--bg-color);
    line-height:1.6;
  }
  .container{max-width:780px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}

  /* Header */
  .header{
    color:#fff;
    background:linear-gradient(135deg,var(--main-color),var(--contrast-color));
    padding:22px 18px 18px;
    position:relative;
    transition: box-shadow .5s ease;
  }
  .header.completed{ box-shadow:0 0 18px rgba(124,139,96,.55); }
  .header h1{
    font-family:'Libre Baskerville',serif;
    font-size:2.0rem;
    text-align:center;
    margin-bottom:6px;
  }
  .subtitle{ text-align:center; font-style:italic; opacity:.95; }
  .header-controls{ position:absolute; top:10px; right:10px; display:flex; gap:8px }
  .header-btn{
    background:rgba(255,255,255,.15);
    border:1px solid rgba(255,255,255,.3);
    color:#fff;
    padding:.35rem .6rem;border-radius:18px;cursor:pointer;
    font-size:.8rem;transition:all .2s ease;
  }
  .header-btn:hover{background:rgba(255,255,255,.25)}
  .progress-bar{height:4px;background:rgba(255,255,255,.28);border-radius:3px;margin-top:14px;overflow:hidden}
  .progress-fill{height:100%;background:#fff;width:0%;transition:width .6s ease}

  /* Content & steps */
  main.content{flex:1;padding:22px}
  .step{display:none;animation:fade .25s ease}
  .step.active{display:block}
  @keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

  .step-indicator{ text-align:center; margin:10px 0 18px }
  .step-counter{font-weight:700;color:#ffffff; background:var(--contrast-color); display:inline-block; padding:4px 10px; border-radius:12px }
  .dots{display:flex;justify-content:center;gap:8px;margin-top:10px}
  .dot{width:12px;height:12px;border-radius:50%;background:var(--border-color)}
  .dot.active{background:var(--main-color)}
  .dot.done{background:var(--success-color)}

  h2{font-family:'Libre Baskerville',serif;color:var(--main-color);font-size:1.7rem;margin:14px 0 10px}
  p.lead{opacity:.95;margin-bottom:10px}

  .tip{
    background:linear-gradient(135deg, rgba(124,139,96,.12), rgba(61,71,44,.06));
    border-left:4px solid var(--main-color);
    padding:12px;border-radius:0 8px 8px 0;margin:14px 0;font-style:italic
  }

  .form-group{margin:16px 0}
  label{display:block;font-weight:700;color:var(--contrast-color);margin-bottom:6px}
  textarea, input[type="text"]{
    width:100%;min-height:110px;resize:vertical;border:2px solid var(--border-color);
    border-radius:10px;padding:12px;font:inherit;color:inherit;background:var(--bg-color);
    transition:all .2s ease;
  }
  input[type="text"]{ min-height:auto; }
  textarea:focus, input[type="text"]:focus{
    outline:none;border-color:var(--main-color);box-shadow:0 0 0 3px rgba(124,139,96,.18)
  }

  /* Panels for structured input */
  .panel{
    border:2px solid var(--border-color);
    border-radius:10px;
    padding:12px;
    margin-bottom:16px;
  }
  .panel h3{
    font-family:'Libre Baskerville',serif;
    font-size:1.1rem;
    margin-bottom:8px;
    color:var(--contrast-color);
  }

  /* Navigation buttons */
  .nav-row{display:flex;gap:12px;align-items:center;margin-top:22px;padding-top:18px;border-top:1px solid var(--border-color)}
  .nav-row .btn{flex:1}
  .btn{
    border:none;border-radius:10px;padding:14px 18px;font-weight:700;cursor:pointer;
    transition:transform .1s ease, background .2s ease, box-shadow .2s ease;
  }
  .btn-primary{background:var(--main-color);color:#fff}
  .btn-primary:hover{background:var(--contrast-color);box-shadow:var(--shadow);transform:translateY(-1px)}
  .btn-secondary{background:var(--accent-color);color:var(--contrast-color);border:1px solid var(--border-color)}
  .btn-secondary:hover{background:var(--border-color)}
  .btn-warning{background:var(--warning-color);color:#fff}
  .btn-warning:hover{background:#c82333}

  .micro{ text-align:center; margin-top:6px; font-style:italic; color:var(--contrast-color); opacity:.85 }

  /* Final-screen: stacked action buttons */
  .final-actions{
    display:flex; flex-direction:column; align-items:center; gap:12px; margin:18px 0; width:100%;
  }
  .final-actions .btn{ display:block; width:100%; max-width:280px; min-height:50px; text-align:center; }

  /* Next Phase CTA */
  .next-phase {
    margin-top: 22px;
    padding: 16px;
    background: var(--accent-color);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    text-align: center;
    box-shadow: var(--shadow);
  }
  .next-phase .lead {
    font-family: 'Libre Baskerville', serif;
    font-size: 1.05rem;
    color: var(--contrast-color);
    margin-bottom: 10px;
  }
  .next-phase .sub {
    font-size: 0.9rem;
    opacity: 0.9;
    margin-top: 6px;
  }
  .next-phase .btn-next {
    margin-top: 10px;
    display: inline-block;
    padding: 12px 18px;
    border-radius: 10px;
    font-weight: 700;
    border: none;
    cursor: pointer;
    background: var(--main-color);
    color: #fff;
    transition: transform .1s ease, background .2s ease, box-shadow .2s ease;
  }
  .next-phase .btn-next:hover {
    background: var(--contrast-color);
    box-shadow: var(--shadow);
    transform: translateY(-1px);
  }

  /* Branding */
  .branding{ text-align:center; padding:18px; font-size:.85rem; color:var(--text-color); opacity:.75; border-top:1px solid var(--border-color) }
  .branding a{ color:var(--contrast-color); text-decoration:none }
  .branding a:hover{ text-decoration:underline }

  .scripture{font-style:italic;background:var(--accent-color);padding:16px;border-left:4px solid var(--main-color);border-radius:8px;margin:16px 0}

  /* Accordion */
  .accordion-item{
    margin:12px 0;
    border:1px solid var(--border-color);
    border-radius:10px;
    background:var(--accent-color);
    overflow:hidden;
  }
  .accordion-header{
    background:var(--accent-color);
    border:none;
    width:100%;
    padding:14px 16px;
    text-align:left;
    cursor:pointer;
    font-weight:700;
    color:var(--contrast-color);
    display:flex; justify-content:space-between; align-items:center;
    transition:background .2s ease;
  }
  .accordion-header:hover{ background:rgba(124,139,96,.08); }
  .accordion-icon{ font-size:1.2em; transition:transform .3s ease; }
  .accordion-content{ display:none; padding:16px; background:var(--bg-color); border-top:1px solid var(--border-color); }
  .accordion-content.open{ display:block; }

  /* Checklist */
  .effect-grid {
    display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr));
    gap:10px; padding:12px; background:var(--accent-color);
    border-radius:10px; border:1px solid var(--border-color);
  }
  .effect-item{ display:flex; align-items:center; gap:8px; padding:8px; border-radius:6px; cursor:pointer; transition:background .2s ease; }
  .effect-item:hover{ background:rgba(124,139,96,.1); }
  .effect-item input[type="checkbox"]{ margin:0; transform:scale(1.2); }

  @media (max-width:640px){
    .nav-row{flex-direction:column}
    .btn{width:100%}
    .effect-grid{ grid-template-columns:1fr; }
  }

  @media (prefers-reduced-motion: reduce) {
    .step { animation: none; }
    .progress-fill { transition: none; }
    .btn { transition: none; }
  }
</style>
</head>

<body>
<div id="pageTop" style="position:absolute;top:0"></div>
<div class="container">

  <header class="header" id="mainHeader">
    <div class="header-controls">
      <button class="header-btn" id="themeBtn" aria-label="Toggle light and dark theme" title="Toggle theme">🌙</button>
    </div>
    <h1>Physical Anchor</h1>
    <p class="subtitle">🧭 A Grounding Compass for the Body</p>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
  </header>

  <main class="content">
    <!-- Step 1 -->
    <section class="step active" data-step="0">
      <div class="step-indicator">
        <div class="step-counter">Step 1 of 8</div>
        <div class="dots">
          <div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
          <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
      </div>
      <h2>Welcome to Your Physical Anchor</h2>
      <p class="lead">Take a moment to arrive here. Take a couple of deep, full breaths and let yourself settle in. When you're ready, we'll begin this gentle check-in with your body.</p>
      <div class="nav-row"><button class="btn btn-primary" onclick="nextStep()">Let's Begin</button></div>
      <div class="micro">Take your time. There's no rush here.</div>
      <div class="branding">© 2025 Clarity Metabolics | <a href="https://claritymetabolics.com" target="_blank">claritymetabolics.com</a></div>
    </section>

    <!-- Step 2: Structured Noticing (like Mental Anchor's G/Y/R panels) -->
    <section class="step" data-step="1">
      <div class="step-indicator">
        <div class="step-counter">Step 2 of 8 — Body Awareness Check-in</div>
        <div class="dots"><div class="dot done"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
      </div>
      <h2>Body Awareness Check-in</h2>
      <p class="lead">Close your eyes for one slow breath. Scan from head to toe. You don't have to force anything — just notice what's present right now.</p>

      <div class="form-group panel" style="background:var(--green-panel)">
        <h3>Physical Sensations — What do you notice in your body?</h3>
        <p style="font-size:0.9rem;font-style:italic;color:var(--contrast-color);opacity:0.8;margin:0 0 12px 0">Take a moment to scan from your head down to your toes</p>
        <textarea id="bodyNotice" placeholder="Example: tight jaw, flutter in stomach, pressure behind eyes, heavy shoulders, restless legs…" rows="3"></textarea>
      </div>

      <div class="form-group panel" style="background:var(--yellow-panel)">
        <h3>Energy Level — How's your overall energy right now?</h3>
        <p style="font-size:0.9rem;font-style:italic;color:var(--contrast-color);opacity:0.8;margin:0 0 12px 0">Notice your energy without judgment</p>
        <textarea id="energyLevel" placeholder="Tired, wired, balanced, scattered, restless, calm..." rows="3"></textarea>
      </div>

      <div class="form-group panel" style="background:var(--red-panel)">
        <h3>What Stands Out Most — What feels most urgent or noticeable?</h3>
        <p style="font-size:0.9rem;font-style:italic;color:var(--contrast-color);opacity:0.8;margin:0 0 12px 0">This could be physical, emotional, or energetic</p>
        <textarea id="standingOut" placeholder="What's calling for your attention right now?" rows="3"></textarea>
      </div>

      <div class="tip"><strong>Micro-practice:</strong> If nothing jumps out at first, that's okay. Small things often give the best clues.</div>

      <div class="nav-row">
        <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
        <button class="btn btn-primary" id="saveBodyStep" onclick="nextStep()" disabled>Complete Body Awareness Check-in to Continue</button>
      </div>
      <div class="micro">Every small awareness is valuable.</div>
      <div class="branding">© 2025 Clarity Metabolics | claritymetabolics.com</div>
    </section>

    <!-- Step 3 -->
    <section class="step" data-step="2">
      <div class="step-indicator">
        <div class="step-counter">Step 3 of 8 — Effects</div>
        <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
      </div>
      <h2>How does it affect you?</h2>
      <p>Physical sensations rarely exist in isolation—they often influence how we think, feel, and move through our day. Check anything that resonates with your current experience.</p>

      <div class="form-group">
        <label>Common effects</label>
        <div class="effect-grid">
          <label class="effect-item"><input type="checkbox" name="effect" value="focus"> It's hard to focus</label>
          <label class="effect-item"><input type="checkbox" name="effect" value="anxious"> It's making me anxious</label>
          <label class="effect-item"><input type="checkbox" name="effect" value="energy"> It's draining my energy</label>
          <label class="effect-item"><input type="checkbox" name="effect" value="disconnected"> I feel disconnected</label>
          <label class="effect-item"><input type="checkbox" name="effect" value="overwhelmed"> I feel overwhelmed</label>
          <label class="effect-item"><input type="checkbox" name="effect" value="unsure"> I'm not sure</label>
        </div>
      </div>

      <div class="form-group">
        <label for="otherEffect">If "Other," please describe:</label>
        <textarea id="otherEffect" placeholder="Describe any other effect..."></textarea>
      </div>

      <div class="nav-row">
        <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
        <button class="btn btn-primary" onclick="nextStep()">What Your Body Needs →</button>
      </div>
      <div class="micro">Your awareness is already healing.</div>
      <div class="branding">© 2025 Clarity Metabolics | claritymetabolics.com</div>
    </section>

    <!-- Step 4 -->
    <section class="step" data-step="3">
      <div class="step-indicator">
        <div class="step-counter">Step 4 of 8 — What Your Body Needs</div>
        <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
      </div>
      <h2>What might your body need?</h2>
      <p>What you're feeling physically might be pointing toward something your body needs to feel safe and restored. Explore whichever sections draw your attention.</p>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Rest <span class="accordion-icon">+</span></button>
        <div class="accordion-content"><p>You may be running on empty while telling yourself you're fine. Your body might be asking for permission to truly restore, not just push through.</p></div>
      </div>
      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Safety <span class="accordion-icon">+</span></button>
        <div class="accordion-content"><p>Your nervous system may be signaling that something doesn't feel safe (physically, emotionally, or spiritually). This tension could be protection.</p></div>
      </div>
      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Boundaries <span class="accordion-icon">+</span></button>
        <div class="accordion-content"><p>Physical tension often shows up when we're saying yes with our mouth but no with our body. What boundary might need attention?</p></div>
      </div>
      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Movement <span class="accordion-icon">+</span></button>
        <div class="accordion-content"><p>Gentle motion can help stagnant energy flow again. Even a minute or two makes a difference.</p></div>
      </div>

      <div class="form-group">
        <label for="otherNeeds">Other insights about what your body might need:</label>
        <textarea id="otherNeeds" placeholder="Anything else come to mind?"></textarea>
      </div>

      <div class="nav-row">
        <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
        <button class="btn btn-primary" onclick="nextStep()">Spot the Pattern →</button>
      </div>
      <div class="micro">Trust what your body is telling you.</div>
      <div class="branding">© 2025 Clarity Metabolics | claritymetabolics.com</div>
    </section>

    <!-- Step 5: NEW - Spot the Pattern (like Mental Anchor) -->
    <section class="step" data-step="4">
      <div class="step-indicator">
        <div class="step-counter">Step 5 of 8 — Spot Your Body's Pattern</div>
        <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
      </div>
      <h2>Spot Your Body's Pattern</h2>
      <p class="lead">Your body has wisdom and often sends the same signals when it needs attention. Recognizing these patterns helps you respond sooner and with more compassion.</p>

      <div class="form-group">
        <label for="bodyPattern">When have you felt this way before?</label>
        <p style="font-size:0.9rem;font-style:italic;color:var(--contrast-color);opacity:0.8;margin:0 0 12px 0">Notice if these physical sensations feel familiar from other situations or times</p>
        <textarea id="bodyPattern" placeholder="Times of stress, certain situations, patterns you notice..."></textarea>
      </div>

      <div class="form-group">
        <label for="earlyWarnings">What are your body's early warning signs?</label>
        <p style="font-size:0.9rem;font-style:italic;color:var(--contrast-color);opacity:0.8;margin:0 0 12px 0">The first signals your body sends when it needs attention</p>
        <textarea id="earlyWarnings" placeholder="Tight shoulders, shallow breathing, restless energy, fatigue..."></textarea>
      </div>

      <div class="form-group">
        <label for="physicalAnchorStatement">Your Physical Anchor Statement — What truth about your body will you remember?</label>
        <p style="font-size:0.9rem;font-style:italic;color:var(--contrast-color);opacity:0.8;margin:0 0 12px 0">A simple truth about honoring your body that you can return to when physical stress returns</p>
        <textarea id="physicalAnchorStatement" placeholder="Even when I'm stressed, my body deserves..."></textarea>
      </div>

      <div class="tip"><strong>Micro-practice:</strong> Read your physical anchor statement once aloud, slowly. Let this truth settle into your body.</div>

      <div class="nav-row">
        <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
        <button class="btn btn-primary" onclick="nextStep()">Regulate Together →</button>
      </div>
      <div class="micro">Patterns once seen can be gently changed.</div>
      <div class="branding">© 2025 Clarity Metabolics | claritymetabolics.com</div>
    </section>

    <!-- Step 6: Regulate -->
    <section class="step" data-step="5">
      <div class="step-indicator">
        <div class="step-counter">Step 6 of 8 — Regulate Together</div>
        <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div><div class="dot"></div></div>
      </div>
      <div class="tip">Before we begin supporting and smoothing out our nervous system, take a moment to appreciate how you're getting in touch with your body's cues and signals - something not many people take time to do. What feels different from when you began?</div>
      <h2>Let's regulate together</h2>
      <p>Regulation is simply helping your body remember how to feel safe and settled again—these tools will simply remind your body how. Choose any that feel helpful.</p>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">
          Breathe deeper <span class="accordion-icon">+</span>
        </button>
        <div class="accordion-content">
          <p>When you're stressed, breathing becomes shallow and fast. Intentional deep breathing reverses this pattern and calms your entire system.</p>
          <p style="margin-top:10px;font-style:italic;color:var(--main-color)"><strong>Try this now:</strong> One slow inhale through your nose, then let it fall out with an audible sigh.</p>
        </div>
      </div>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Sip some water <span class="accordion-icon">+</span></button>
        <div class="accordion-content">
          <p>Water signals safety to your nervous system and naturally helps your body unwind. It's one of the gentlest ways to nourish yourself.</p>
          <p style="margin-top:10px;font-style:italic;color:var(--main-color)"><strong>Try this now:</strong> If you have water nearby, take one mindful sip right now and notice how your body receives it.</p>
        </div>
      </div>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Change your temperature <span class="accordion-icon">+</span></button>
        <div class="accordion-content"><p>Step outside for a moment, splash cold water on your face, or place a warm hand over your chest. These tiny shifts affect your nervous system.</p></div>
      </div>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Move your body <span class="accordion-icon">+</span></button>
        <div class="accordion-content">
          <h3>Movement Reset</h3>
          <p>Take a moment to stand up and guide your body through its natural range of motion. Move slowly and within a comfortable range.</p>
          <ul>
            <li><strong>Neck:</strong> Gently nod your head up and down. Look side to side. Tuck your chin and roll your head from shoulder to shoulder.</li>
            <li><strong>Shoulders:</strong> Roll shoulders forward a few times, then back. Gently reach your arms forward and behind you.</li>
            <li><strong>Hands & wrists:</strong> Make a fist and open your hands wide several times. Circle your wrists in both directions.</li>
            <li><strong>Torso:</strong> With hands on hips, gently twist left and right. Reach one arm overhead while the other hand rests on your hip, bending sideways toward the hand on your hip. Switch sides.</li>
            <li><strong>Low back & front body:</strong> Sit with hands on knees, lift your chest and look up to arch your back. Switch to a rounded back, gently tucking your chin.</li>
            <li><strong>Hips & ankles:</strong> While seated, place one foot on your opposite knee (or shin if the knee is out of reach) and hold for a few breaths. Switch sides. Circle each ankle in both directions.</li>
          </ul>
        </div>
      </div>

      <div class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">Light & Sleep <span class="accordion-icon">+</span></button>
        <div class="accordion-content">
          <p>Spend <strong>2–5 minutes</strong> outside in natural light within an hour of waking to support your body's rhythm. In the evening, dim lights about an hour before bed and <strong>avoid screens/blue light</strong> during that time to support deeper, more restorative sleep.</p>
          <ul>
            <li><strong>Morning:</strong> Step outside briefly (no sunglasses if possible).</li>
            <li><strong>Evening:</strong> Use lamps instead of bright overhead lighting.</li>
            <li><strong>Screen-free:</strong> Aim for the last <strong>60 minutes</strong> before bed.</li>
          </ul>
        </div>
      </div>

      <div class="nav-row">
        <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
        <button class="btn btn-primary" onclick="nextStep()">What's Shifting? →</button>
      </div>
      <div class="micro">Small changes can have big impacts.</div>
      <div class="branding">© 2025 Clarity Metabolics | claritymetabolics.com</div>
    </section>

    <!-- Step 7 -->
    <section class="step" data-step="6">
      <div class="step-indicator">
        <div class="step-counter">Step 7 of 8 — What's Shifting?</div>
        <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div></div>
      </div>
      <h2>What's shifting?</h2>
      <p>After that pause in Step 6, how are things feeling now?</p>

      <div class="form-group">
        <label for="regulationTried">Did you try any of the regulation techniques? Which ones?</label>
        <p style="font-size:0.9em;color:var(--main-color);margin-bottom:8px;font-style:italic;">Even just reading about them counts as engaging with the practices.</p>
        <textarea id="regulationTried" placeholder="Example: I tried the long exhale and a glass of water…"></textarea>
      </div>

      <div class="form-group">
        <label for="shiftingNotice">How does your body want to respond right now?</label>
        <p style="font-size:0.9em;color:var(--main-color);margin-bottom:8px;font-style:italic;">Your body might want to move, rest, breathe differently, or something else entirely.</p>
        <textarea id="shiftingNotice" placeholder="Any changes in sensation, energy, or state?"></textarea>
      </div>

      <div class="nav-row">
        <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
        <button class="btn btn-primary" onclick="nextStep()">Your Summary →</button>
      </div>
      <div class="micro">You're learning to listen. That's powerful.</div>
      <div class="branding">© 2025 Clarity Metabolics | claritymetabolics.com</div>
    </section>

    <!-- Step 8: Summary (cleaned up) -->
    <section class="step" data-step="7">
      <div class="step-indicator">
        <div class="step-counter">Step 8 of 9</div>
        <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div><div class="dot"></div></div>
      </div>
      <h2>Your Physical Anchor Summary</h2>
      <p>You just practiced listening to your body rather than overriding it. You've built awareness, recognized patterns, and learned to respond with compassion.</p>

      <div style="background:var(--accent-color);padding:16px;border-radius:10px;margin:12px 0">
        <h3 style="font-family:'Libre Baskerville',serif;color:var(--contrast-color)">Body Awareness Check-in</h3>
        <p id="summaryBodyNotice">—</p>
        
        <h3 style="font-family:'Libre Baskerville',serif;color:var(--contrast-color);margin-top:10px">Energy Level</h3>
        <p id="summaryEnergyLevel">—</p>
        
        <h3 style="font-family:'Libre Baskerville',serif;color:var(--contrast-color);margin-top:10px">What Stood Out</h3>
        <p id="summaryStandingOut">—</p>
        
        <h3 style="font-family:'Libre Baskerville',serif;color:var(--contrast-color);margin-top:10px">How It Affected You</h3>
        <p id="summaryEffects">No specific effects noted.</p>
        
        <h3 style="font-family:'Libre Baskerville',serif;color:var(--contrast-color);margin-top:10px">Body's Patterns</h3>
        <p id="summaryPatterns">—</p>
        
        <h3 style="font-family:'Libre Baskerville',serif;color:var(--contrast-color);margin-top:10px">What Shifted</h3>
        <p id="summaryShifting">No changes noted.</p>
      </div>

      <!-- Physical Anchor Statement Highlight -->
      <div style="background:linear-gradient(135deg,var(--main-color),var(--contrast-color));color:#fff;padding:20px;border-radius:12px;margin:20px 0;text-align:center;box-shadow:var(--shadow)">
        <h3 style="font-family:'Libre Baskerville',serif;font-size:1.2rem;margin-bottom:12px;opacity:0.9">Your Physical Anchor Statement</h3>
        <p id="physicalAnchorHighlight" style="font-family:'Libre Baskerville',serif;font-size:1.1rem;font-style:italic;line-height:1.6">—</p>
        <p style="font-size:0.85rem;margin-top:10px;opacity:0.8">Your truth to return to when your body feels overwhelmed</p>
      </div>

      <div class="final-actions">
        <button class="btn btn-primary" onclick="downloadSummary()">📄 Download Summary</button>
        <button class="btn btn-secondary" onclick="openSacredReflection()">✨ Sacred Reflection</button>
      </div>

      <div style="display:flex; flex-direction:column; align-items:center; gap:12px; margin:22px 0; width:100%;">
        <button class="btn btn-secondary" style="display:block; width:100%; max-width:280px; min-height:50px; text-align:center;" onclick="prevStep()">← Back</button>
        <button class="btn btn-primary" style="display:block; width:100%; max-width:280px; min-height:50px; text-align:center;" onclick="nextStep()">Next Steps →</button>
      </div>

      <div class="branding">© 2025 Clarity Metabolics | claritymetabolics.com</div>
    </section>

    <!-- Step 9: Next Steps - Mental Anchor lead-in -->
    <section class="step" data-step="8">
      <div class="step-indicator">
        <div class="step-counter">Step 9 of 9</div>
        <div class="dots"><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot done"></div><div class="dot active"></div></div>
      </div>
      <h2>Your Next Anchor: Mental</h2>
      <p class="lead">Now that your body feels more settled and you're tuned into its signals, let's sharpen your mental clarity so your thoughts support rather than overwhelm you.</p>

      <div class="next-phase" aria-label="Move to Mental Anchor">
        <div class="lead"><strong>Carry your body awareness into clear thinking.</strong></div>
        <button class="btn-next" onclick="goToMentalAnchor()">→ Begin the Mental Anchor</button>
        <div class="sub">Learn to filter mental noise and see truth clearly.</div>
      </div>

      <div style="display:flex; flex-direction:column; align-items:center; gap:12px; margin:22px 0; width:100%;">
        <button class="btn btn-secondary" style="display:block; width:100%; max-width:280px; min-height:50px; text-align:center;" onclick="prevStep()">← Back</button>
        <button class="btn btn-secondary" id="startOverBtn" style="display:block; width:100%; max-width:280px; min-height:50px; text-align:center;" onclick="confirmStartOver()">🔄 Start Over</button>
      </div>

      <div class="branding">
        <div><strong>Created by Clarity Metabolics</strong></div>
        <div style="font-style:italic;margin-top:4px">Quiet the world. Reconnect with what's real.</div>
        <div><a href="https://claritymetabolics.com" target="_blank">claritymetabolics.com</a></div>
      </div>
    </section>
  </main>
</div>

<!-- Sacred Reflection Modal -->
<div id="sacredModal" style="position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:16px;z-index:1000">
  <div style="background:var(--bg-color);color:var(--text-color);max-width:560px;width:100%;max-height:90vh;border-radius:12px;box-shadow:var(--shadow);padding:22px;overflow-y:auto">
    <h3 style="font-family:'Libre Baskerville',serif;color:var(--main-color);margin-bottom:8px">Sacred Reflection</h3>
    <div class="scripture" style="margin:10px 0 16px 0">
      <div style="margin-bottom:24px">
        <p style="font-size:1.1rem;font-weight:700;color:var(--main-color);margin-bottom:8px">FATHER</p>
        <p style="margin-left:16px;line-height:1.7">Thank You for creating my body as Your temple. Help me honor this gift with rest, nourishment, and gentle care.</p>
      </div>
      
      <div style="margin-bottom:24px">
        <p style="font-size:1.1rem;font-weight:700;color:var(--main-color);margin-bottom:8px">SON</p>
        <p style="margin-left:16px;line-height:1.7">Jesus, You knew physical exhaustion and rest. Teach me to follow Your rhythm of work and restoration.</p>
      </div>
      
      <div style="margin-bottom:24px">
        <p style="font-size:1.1rem;font-weight:700;color:var(--main-color);margin-bottom:8px">HOLY SPIRIT</p>
        <p style="margin-left:16px;line-height:1.7">Spirit, help me listen to my body's wisdom and respond with compassion rather than pushing through.</p>
      </div>
      
      <p style="margin-top:28px;font-style:italic;text-align:center;opacity:0.9">✨ <strong>"Do you not know that your bodies are temples of the Holy Spirit?" — 1 Corinthians 6:19</strong></p>
    </div>
    <div style="text-align:center">
      <button class="btn btn-primary" onclick="closeSacredReflection()">Amen</button>
    </div>
  </div>
</div>

<script>
  // --- State
  let currentStep = 0;
  const totalSteps = 9;
  const responses = {
    bodyNotice:'', energyLevel:'', standingOut:'', effects:[], otherEffect:'',
    otherNeeds:'', bodyPattern:'', earlyWarnings:'', physicalAnchorStatement:'',
    regulationTried:'', shiftingNotice:''
  };

  // Light / Dark toggle
  document.getElementById('themeBtn').addEventListener('click', () => {
    const body = document.body;
    const btn = document.getElementById('themeBtn');
    if (body.getAttribute('data-theme') === 'dark') {
      body.removeAttribute('data-theme'); btn.textContent = '🌙';
    } else {
      body.setAttribute('data-theme','dark'); btn.textContent = '☀️';
    }
  });

  // Accordion
  function toggleAccordion(button) {
    const content = button.nextElementSibling;
    const icon = button.querySelector('.accordion-icon');
    if (content.classList.contains('open')) { 
      content.classList.remove('open'); 
      icon.textContent = '+'; 
    } else { 
      content.classList.add('open'); 
      icon.textContent = '−'; 
    }
  }

  // Step navigation helpers
  function showStep(i){
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    const stepEl = document.querySelector(`.step[data-step="${i}"]`);
    if (stepEl) stepEl.classList.add('active');

    document.getElementById('progressFill').style.width = ((i)/ (totalSteps-1)) * 100 + '%';
    document.querySelectorAll('.step .dots').forEach(group => {
      [...group.children].forEach((d, idx) => {
        d.classList.remove('active','done');
        if (idx < i) d.classList.add('done');
        if (idx === i) d.classList.add('active');
      });
    });

    requestAnimationFrame(()=>{
      document.getElementById('pageTop').scrollIntoView({behavior:'auto',block:'start'});
      setTimeout(()=>{
        if (i===1) document.getElementById('bodyNotice')?.focus();
        if (i===4) document.getElementById('bodyPattern')?.focus();
        if (i===6) document.getElementById('regulationTried')?.focus();
      },100);
    });

    if (i===7){ document.getElementById('mainHeader')?.classList.add('completed'); updateSummary(); }
  }

  function nextStep(){ saveCurrent(); if (currentStep < totalSteps-1){ currentStep++; showStep(currentStep); } }
  function prevStep(){ if (currentStep>0){ currentStep--; showStep(currentStep);} }

  // Save per-step
  function saveCurrent(){
    switch(currentStep){
      case 1:
        responses.bodyNotice = document.getElementById('bodyNotice').value.trim();
        responses.energyLevel = document.getElementById('energyLevel').value.trim();
        responses.standingOut = document.getElementById('standingOut').value.trim();
        break;
      case 2:
        responses.effects = [...document.querySelectorAll('input[name="effect"]:checked')].map(cb=>cb.value);
        responses.otherEffect = document.getElementById('otherEffect').value.trim();
        break;
      case 3:
        responses.otherNeeds = document.getElementById('otherNeeds').value.trim();
        break;
      case 4:
        responses.bodyPattern = document.getElementById('bodyPattern').value.trim();
        responses.earlyWarnings = document.getElementById('earlyWarnings').value.trim();
        responses.physicalAnchorStatement = document.getElementById('physicalAnchorStatement').value.trim();
        break;
      case 6:
        responses.regulationTried = document.getElementById('regulationTried').value.trim();
        responses.shiftingNotice = document.getElementById('shiftingNotice').value.trim();
        break;
    }
    // Save to localStorage
    try {
      localStorage.setItem('physicalAnchorResponses', JSON.stringify(responses));
    } catch (e) {
      console.warn('Could not save to localStorage:', e);
    }
  }

  // Summary
  function updateSummary(){
    const effectMap = {focus:"Difficulty focusing", anxious:"Creating anxiety", energy:"Draining energy", disconnected:"Feeling disconnected", overwhelmed:"Feeling overwhelmed", unsure:"Uncertain"};
    const effectsList = responses.effects.filter(e=>e!=='other').map(e=>effectMap[e]).join(', ');
    const effectsText = responses.otherEffect || effectsList || 'No specific effects noted.';
    
    const patterns = [
      responses.bodyPattern ? 'When felt before: ' + responses.bodyPattern : '',
      responses.earlyWarnings ? 'Early warning signs: ' + responses.earlyWarnings : ''
    ].filter(Boolean).join(' | ') || 'No patterns noted.';
    
    let shifting = responses.shiftingNotice || 'No changes noted.';
    if (responses.regulationTried) shifting = `After trying: ${responses.regulationTried}. ${shifting}`;

    document.getElementById('summaryBodyNotice').textContent = responses.bodyNotice || 'No specific sensations noted.';
    document.getElementById('summaryEnergyLevel').textContent = responses.energyLevel || 'No energy level noted.';
    document.getElementById('summaryStandingOut').textContent = responses.standingOut || 'Nothing specific stood out.';
    document.getElementById('summaryEffects').textContent = effectsText;
    document.getElementById('summaryPatterns').textContent = patterns;
    document.getElementById('summaryShifting').textContent = shifting;
    
    // Update highlighted physical anchor statement
    document.getElementById('physicalAnchorHighlight').textContent = responses.physicalAnchorStatement || 'Your physical anchor statement will appear here';
  }

  // Start Over confirm
  let startOverArmed = false;
  function confirmStartOver(){
    const btn = document.getElementById('startOverBtn');
    if (!startOverArmed){
      startOverArmed = true;
      btn.classList.remove('btn-secondary'); btn.classList.add('btn-warning');
      btn.textContent = 'Confirm Start Over';
      setTimeout(()=>{ if(startOverArmed){
        startOverArmed=false; btn.classList.remove('btn-warning'); btn.classList.add('btn-secondary'); btn.textContent='🔄 Start Over';
      }},3000);
    } else { restartTool(); }
  }

  function restartTool(){
    Object.keys(responses).forEach(k => responses[k] = Array.isArray(responses[k])?[]:'');
    document.querySelectorAll('textarea, input[type="text"]').forEach(t => t.value='');
    document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked=false);
    const btn = document.getElementById('startOverBtn');
    if (btn){ startOverArmed=false; btn.className='btn btn-secondary'; btn.textContent='🔄 Start Over'; }
    const saveBtn = document.getElementById('saveBodyStep'); if (saveBtn) saveBtn.disabled = true;
    try {
      localStorage.removeItem('physicalAnchorResponses');
    } catch (e) {
      console.warn('Could not clear localStorage:', e);
    }
    currentStep = 0; showStep(currentStep);
  }

  // Download summary
  function downloadSummary(){
    const lines = [
      'Physical Anchor — Session Summary',
      'Generated: ' + new Date().toLocaleString(),
      '',
      'PHYSICAL ANCHOR STATEMENT:',
      responses.physicalAnchorStatement || 'None noted',
      '',
      'BODY AWARENESS CHECK-IN:',
      'Physical Sensations: ' + (responses.bodyNotice || 'None noted'),
      'Energy Level: ' + (responses.energyLevel || 'None noted'),
      'What Stood Out: ' + (responses.standingOut || 'None noted'),
      '',
      'HOW IT AFFECTED YOU:',
      responses.otherEffect || (responses.effects.join(', ') || 'None noted'),
      '',
      'BODY\'S PATTERNS:',
      'When felt before: ' + (responses.bodyPattern || 'None noted'),
      'Early warning signs: ' + (responses.earlyWarnings || 'None noted'),
      '',
      'WHAT YOUR BODY MIGHT NEED:',
      responses.otherNeeds || 'None noted',
      '',
      'WHAT YOU TRIED:',
      responses.regulationTried || 'None noted',
      '',
      'WHAT SHIFTED:',
      responses.shiftingNotice || 'None noted',
      '',
      '— © 2025 Clarity Metabolics | claritymetabolics.com'
    ].join('\n');

    const blob = new Blob([lines],{type:'text/plain'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href=url; a.download='physical-anchor-summary.txt';
    document.body.appendChild(a); a.click();
    document.body.removeChild(a); URL.revokeObjectURL(url);
  }

  // Sacred Reflection modal
  function openSacredReflection(){ document.getElementById('sacredModal').style.display='flex'; }
  function closeSacredReflection(){ document.getElementById('sacredModal').style.display='none'; }

  // Mental Anchor link (update route when ready)
  function goToMentalAnchor(){
    alert('The Mental Anchor tool will be available soon! This would normally navigate to the next tool in the Five Anchors series.');
  }

  // Enable/disable Save on STEP 1 (Body Awareness)
  function checkBodyInputs() {
    const body = document.getElementById('bodyNotice')?.value.trim() || '';
    const energy = document.getElementById('energyLevel')?.value.trim() || '';
    const standing = document.getElementById('standingOut')?.value.trim() || '';
    const saveBtn = document.getElementById('saveBodyStep');
    if (saveBtn) {
      const hasContent = !!(body || energy || standing);
      saveBtn.disabled = !hasContent;
      saveBtn.textContent = hasContent ? 'Effects →' : 'Complete Body Awareness Check-in to Continue';
    }
  }

  // Init
  function init(){ 
    // Load saved responses
    try {
      const saved = localStorage.getItem('physicalAnchorResponses');
      if (saved) {
        const savedResponses = JSON.parse(saved);
        Object.assign(responses, savedResponses);
        // Populate form fields
        Object.keys(savedResponses).forEach(key => {
          const el = document.getElementById(key);
          if (el && savedResponses[key]) {
            if (key === 'effects' && Array.isArray(savedResponses[key])) {
              // Handle effects checkboxes
              savedResponses[key].forEach(value => {
                const checkbox = document.querySelector(`input[name="effect"][value="${value}"]`);
                if (checkbox) checkbox.checked = true;
              });
            } else {
              el.value = savedResponses[key];
            }
          }
        });
      }
    } catch (e) {
      console.warn('Could not load from localStorage:', e);
    }
    
    showStep(0);
    setTimeout(() => {
      ['bodyNotice','energyLevel','standingOut'].forEach(id=>{
        const el = document.getElementById(id);
        if (el) el.addEventListener('input', checkBodyInputs);
      });
      // Check button state on load to handle restored content
      checkBodyInputs();
    }, 100);
  }
  if (document.readyState === 'loading'){ document.addEventListener('DOMContentLoaded', init); } else { init(); }
</script>
</body>
</html>
